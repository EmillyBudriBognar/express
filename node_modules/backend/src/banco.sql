-- ============================================
-- Script de criação do banco de dados
-- ============================================
-- Este script cria o banco de dados e a tabela de estudantes
-- Execute este script no MySQL antes de iniciar a aplicação

-- Cria o banco de dados (se não existir)
CREATE DATABASE IF NOT EXISTS dados CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- Seleciona o banco de dados
USE dados;

-- Remove a tabela se já existir (cuidado em produção!)
-- DROP TABLE IF EXISTS estudante;

-- Cria a tabela de estudantes com estrutura completa
-- IMPORTANTE: A estrutura inicial já inclui a coluna email para evitar problemas
CREATE TABLE IF NOT EXISTS estudante (
    id INT AUTO_INCREMENT NOT NULL,
    nome VARCHAR(100) NOT NULL,  -- Aumentado de 20 para 100 caracteres
    email VARCHAR(100) NULL,      -- Email pode ser NULL (opcional)
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,  -- Data de criação
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,  -- Data de atualização
    PRIMARY KEY (id),
    INDEX idx_email (email)  -- Índice para melhorar performance em buscas por email
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Insere dados de exemplo (apenas se a tabela estiver vazia)
-- Estes dados são opcionais e podem ser removidos em produção
INSERT INTO estudante (nome, email) VALUES
('Bruno', 'bruno@example.com'),
('Vivian', 'vivian@example.com'),
('Marco', 'marco@example.com')
ON DUPLICATE KEY UPDATE nome=VALUES(nome);

-- Verifica os dados inseridos
SELECT * FROM estudante;

-- ============================================
-- NOTAS IMPORTANTES:
-- ============================================
-- 1. O campo 'nome' é NOT NULL (obrigatório)
-- 2. O campo 'email' é NULL (opcional)
-- 3. A tabela usa UTF8MB4 para suportar caracteres especiais e emojis
-- 4. Índice criado no campo email para melhorar performance
-- 5. Campos created_at e updated_at para auditoria (opcional)